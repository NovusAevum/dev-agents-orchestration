@startuml decision-tree
!theme cyborg-outline
skinparam backgroundColor #0a0e27
skinparam shadowing false
skinparam linetype ortho

title <size:20><b>ğŸ¯ Intelligent Agent Selection</b></size>\n<size:12><i>"The right agent, at the right moment"</i></size>

' Start
:Task Request] as Start #4ecdc4

' Analysis
if (<b>Analyze Task Type</b>) then
  -[#4ecdc4]-> [Code Bug/Error]
  :ğŸ”§ auto-debugger] as AutoDebug #ff6b6b

else
  -[#45b7d1]-> [API Development]
  :ğŸ”Œ backend-api-agent] as BackendAPI #45b7d1

else
  -[#96ceb4]-> [UI/UX Work]
  :ğŸ¨ elite-frontend-architect] as Frontend #96ceb4

else
  -[#a8e6cf]-> [Refactoring]
  :ğŸ—ï¸ production-refactor] as Refactor #a8e6cf

else
  -[#fd79a8]-> [Security Issue]
  :ğŸ›¡ï¸ security-redteam] as Security #fd79a8

else
  -[#fdcb6e]-> [Testing]
  :ğŸ§ª test-runner] as Test #fdcb6e

else
  -[#b8b8ff]-> [Cloud/Infra]
  :â˜ï¸ cloud-architect] as Cloud #b8b8ff

else
  -[#d6b8c5]-> [Architecture]
  :ğŸ›ï¸ codebase-architect] as Arch #d6b8c5
endif

' Merge all agents to mode selection
AutoDebug -down-> ModeSelect
BackendAPI -down-> ModeSelect
Frontend -down-> ModeSelect
Refactor -down-> ModeSelect
Security -down-> ModeSelect
Test -down-> ModeSelect
Cloud -down-> ModeSelect
Arch -down-> ModeSelect

' Mode Selection
if (<b>Determine\nExecution Mode</b>) as ModeSelect then
  -[#00ff00]-> [Simple Task\n<5min estimate]
  :âš¡ Default Mode\nSequential] as Default #00b894

else
  -[#ffff00]-> [Medium Complexity\n5-15min estimate]
  :âš¡âš¡ Advanced Mode\nPrimary + Support] as Advanced #f39c12

else
  -[#ff00ff]-> [High Complexity\n15min+ estimate]
  :âš¡âš¡âš¡ Elite Mode\nAll Agents Parallel] as Elite #e74c3c
endif

' Execution Strategy
Default -down-> ExecDefault
Advanced -down-> ExecAdvanced
Elite -down-> ExecElite

:Sequential Execution\n1 agent â†’ results] as ExecDefault #00b894
:Parallel Execution\nPrimary + 1-2 support â†’ results] as ExecAdvanced #f39c12
:Full Parallel Execution\nAll 12 agents â†’ aggregated results] as ExecElite #e74c3c

' Merge to execution
ExecDefault -down-> Execute
ExecAdvanced -down-> Execute
ExecElite -down-> Execute

:ğŸš€ Execute Workflow] as Execute #9b59b6

' Validation
if (<b>Validation Gates</b>) as Validate then
  -[#00ff00]-> [Tests Pass âœ…\nCoverage >80%\nNo Critical Issues]
  :âœ… Success] as Success #00b894
  Success -down-> Metrics

else
  -[#ff0000]-> [Tests Fail âŒ\nOr Quality Issues]
  if (<b>Retry < 3?</b>) as Retry then
    -[#ffff00]-> [Yes, Retry]
    Retry -up-> AutoDebug : <color:#ff6b6b><b>Auto-fix attempt</b></color>

  else
    -[#ff0000]-> [No, Max Retries]
    :âš ï¸ Escalate to User\nRequires manual intervention] as Escalate #d63031
    Escalate -down-> End
  endif
endif

:ğŸ“Š Log Metrics\n- Execution time\n- Token usage\n- Quality scores] as Metrics #6c3483

:Task Complete] as Complete #4ecdc4

[*] --> Start
Execute --> Validate
Metrics --> Complete
Complete --> [*]

legend right
  |<#4ecdc4>   | <b>Entry/Exit Points</b> |
  |<#ff6b6b>   | <b>Agent Selection</b> |
  |<#00b894>   | <b>Success Paths</b> |
  |<#e74c3c>   | <b>Elite Mode</b> |
  |<#d63031>   | <b>Failure/Escalation</b> |
endlegend

footer <b>ğŸ¯ 87%% first-attempt success | ğŸ”„ Auto-retry with learning | âš¡ Mode auto-selected by complexity</b>

@enduml
